/**
* -----------------------------------------------------------------------------
* @package     smartVISU
* @author      Andre Kohler
* @copyright   2020
* @license     GPL [http://www.gnu.de]
* -----------------------------------------------------------------------------
*/

{% extends "base.html" %}

{% import "lib.html" as lib %}
{% import "basic.html" as basic %}
{% import "calendar.html" as calendar %}
{% import "clock.html" as clock %}
{% import "device.html" as device %}
{% import "icon.html" as icon %}
{% import "multimedia.html" as multimedia %}
{% import "phone.html" as phone %}
{% import "plot.html" as plot %}
{% import "popup.html" as popup %}
{% import "status.html" as status %}
{% import "weather.html" as weather %}
{% import "quad.html" as quad %}

{% block content %}

		<div>
			<h3>Render-Result</h3>
			<br>

				Miele Control Center (Dryer):<br>
				<table>
				<tr>
				<td>
				{{ status.collapse('Control_1', 'MieleDevices.Dryer.visu.allowed_actions.start', 0) }}				
				<div class="hide" data-bind="Control_1">        
          {{basic.stateswitch('','MieleDevices.Dryer.visu.action_buttons.start','midi',[0,1],'audio_play','Start',['icon0','icon1'],'','','','')}}
        </div>
        </td><td>
				{{ status.collapse('Control_2', 'MieleDevices.Dryer.visu.allowed_actions.stop', 0) }}				        
				<div class="hide" data-bind="Control_2">                
          {{basic.stateswitch('','MieleDevices.Dryer.visu.action_buttons.stop','midi',[0,1],'audio_stop','Stop',['icon0','icon1'],'','','','')}}
        </div>        
        </td><td>
				{{ status.collapse('Control_3', 'MieleDevices.Dryer.visu.allowed_actions.pause', 0) }}
				<div class="hide" data-bind="Control_3">
          {{basic.stateswitch('','MieleDevices.Dryer.visu.action_buttons.pause','midi',[0,1],'audio_pause','Pause',['icon0','icon1'],'','','','')}} 
        </div>                  
        </td><td>
				{{ status.collapse('Control_4', 'MieleDevices.Dryer.visu.allowed_actions.start_supercooling', 0) }}				        
				<div class="hide" data-bind="Control_4">                
          {{basic.stateswitch('','MieleDevices.Dryer.visu.action_buttons.start_supercooling','midi',[0,1],'weather_snow','Cooling',['red','red'],'','','','')}}
        </div>          
        </td><td>
				{{ status.collapse('Control_5', 'MieleDevices.Dryer.visu.allowed_actions.stop_supercooling', 0) }}				                
				<div class="hide" data-bind="Control_5">                          
          {{basic.stateswitch('','MieleDevices.Dryer.visu.action_buttons.stop_supercooling','midi',[0,1],'weather_snow','Cooling',['green','green'],'','','','')}}
        </div>          
        </td><td>
				{{ status.collapse('Control_6', 'MieleDevices.Dryer.visu.allowed_actions.start_superfreezing', 0) }}				                        
				<div class="hide" data-bind="Control_6">                          
          {{basic.stateswitch('','MieleDevices.Dryer.visu.action_buttons.start_superfreezing','midi',[0,1],'weather_frost','Freezing',['red','red'],'','','','')}}
        </div>          
        </td><td>
				{{ status.collapse('Control_7', 'MieleDevices.Dryer.visu.allowed_actions.stop_superfreezing', 0) }}				                        
				<div class="hide" data-bind="Control_7">                          
        {{basic.stateswitch('','MieleDevices.Dryer.visu.action_buttons.stop_superfreezing','midi',[0,1],'weather_frost','Freezing',['green','green'],'','','','')}}
        </div>          
        </td><td>
				{{ status.collapse('Control_8', 'MieleDevices.Dryer.visu.allowed_actions.powerOn', 0) }}				                        
				<div class="hide" data-bind="Control_8">                          
        {{basic.stateswitch('','MieleDevices.Dryer.visu.action_buttons.powerOn','midi',[0,1],'info_ack','Power On',['red','red'],'','','')}}
        </div>          
        </td><td>
				{{ status.collapse('Control_9', 'MieleDevices.Dryer.visu.allowed_actions.powerOff', 0) }}				                        
				<div class="hide" data-bind="Control_9">                          
        {{basic.stateswitch('','MieleDevices.Dryer.visu.action_buttons.powerOn','midi',[0,1],'info_error','Power Off',['green','green'],'','','')}}
        </div>          
        </td>
        </tr>
        </table>

        <br>
        <br>
        <br>        

				Miele Control Center (Freezer):<br>
				<table>
				<tr>
				<td>
				{{ status.collapse('Control_Freezer_1', 'MieleDevices.Freezer.visu.allowed_actions.start', 0) }}				
				<div class="hide" data-bind="Control_Freezer_1">        
          {{basic.stateswitch('','MieleDevices.Freezer.visu.action_buttons.start','midi',[0,1],'audio_play','Start',['icon0','icon1'],'','','','')}}
        </div>
        </td><td>
				{{ status.collapse('Control_Freezer_2', 'MieleDevices.Freezer.visu.allowed_actions.stop', 0) }}				        
				<div class="hide" data-bind="Control_Freezer_2">                
          {{basic.stateswitch('','MieleDevices.Freezer.visu.action_buttons.stop','midi',[0,1],'audio_stop','Stop',['icon0','icon1'],'','','','')}}
        </div>        
        </td><td>
				{{ status.collapse('Control_Freezer_3', 'MieleDevices.Freezer.visu.allowed_actions.pause', 0) }}
				<div class="hide" data-bind="Control_Freezer_3">
          {{basic.stateswitch('','MieleDevices.Freezer.visu.action_buttons.pause','midi',[0,1],'audio_pause','Pause',['icon0','icon1'],'','','','')}} 
        </div>                  
        </td><td>
				{{ status.collapse('Control_Freezer_4', 'MieleDevices.Freezer.visu.allowed_actions.start_supercooling', 0) }}				        
				<div class="hide" data-bind="Control_Freezer_4">                
          {{basic.stateswitch('','MieleDevices.Freezer.visu.action_buttons.start_supercooling','midi',[0,1],'weather_snow','Cooling',['red','red'],'','','','')}}
        </div>          
        </td><td>
				{{ status.collapse('Control_Freezer_5', 'MieleDevices.Freezer.visu.allowed_actions.stop_supercooling', 0) }}				                
				<div class="hide" data-bind="Control_Freezer_5">                          
          {{basic.stateswitch('','MieleDevices.Freezer.visu.action_buttons.stop_supercooling','midi',[0,1],'weather_snow','Cooling',['green','green'],'','','','')}}
        </div>          
        </td><td>
				{{ status.collapse('Control_Freezer_6', 'MieleDevices.Freezer.visu.allowed_actions.start_superfreezing', 0) }}				                        
				<div class="hide" data-bind="Control_Freezer_6">                          
          {{basic.stateswitch('','MieleDevices.Freezer.visu.action_buttons.start_superfreezing','midi',[0,1],'weather_frost','Freezing',['red','red'],'','','','')}}
        </div>          
        </td><td>
				{{ status.collapse('Control_Freezer_7', 'MieleDevices.Freezer.visu.allowed_actions.stop_superfreezing', 0) }}				                        
				<div class="hide" data-bind="Control_Freezer_7">                          
        {{basic.stateswitch('','MieleDevices.Freezer.visu.action_buttons.stop_superfreezing','midi',[0,1],'weather_frost','Freezing',['green','green'],'','','','')}}
        </div>          
        </td><td>
				{{ status.collapse('Control_Freezer_8', 'MieleDevices.Freezer.visu.allowed_actions.powerOn', 0) }}				                        
				<div class="hide" data-bind="Control_Freezer_8">                          
        {{basic.stateswitch('','MieleDevices.Freezer.visu.action_buttons.powerOn','midi',[0,1],'info_ack','Power On',['red','red'],'','','')}}
        </div>          
        </td><td>
				{{ status.collapse('Control_Freezer_9', 'MieleDevices.Freezer.visu.allowed_actions.powerOff', 0) }}				                        
				<div class="hide" data-bind="Control_Freezer_9">                          
        {{basic.stateswitch('','MieleDevices.Freezer.visu.action_buttons.powerOn','midi',[0,1],'info_error','Power Off',['green','green'],'','','')}}
        </div>          
        </td>
        </tr>
        </table>


        <table style="width:250px">
        <tr>
        <td style="width:50%"> Zone 1 :</td>
        <td>
         {{  basic.select('','MieleDevices.Freezer.visu.values.temperatur_zone_1.target_temperature','','','','','','horizontal',
         'MieleDevices.Freezer.values.temperatur_zone_1.range_index','MieleDevices.Freezer.values.temperatur_zone_1.range_description')  }}
        </td>
        </tr>
        <tr>
        <td style="width:50%"> Zone 2:</td>
        <td>
         {{  basic.select('','MieleDevices.Freezer.visu.values.temperatur_zone_2.target_temperature','','','','','','horizontal',
         'MieleDevices.Freezer.values.temperatur_zone_2.range_index','MieleDevices.Freezer.values.temperatur_zone_2.range_description')  }}
        </td>        

        </tr>
        </table>          



		</div>

		
 
		</div>
        <div id="last_updated">
   			<h3>Here you will see the last update time of the rendered widgets</h3>
        </div>

	
    <script>
    var lastTimeStamp = 0;


    function CheckUpdate()

    {
	     $.ajax({
		       url: "lib/widget_assistant/widget_assistant.php",
		       method: "GET",
		       dataType: "text",
		       data: {
			       		command : 'get_time_stamp'
			       	 },
		       success: function (result) {
                   newTimeStamp = (parseInt(result))*1000
     	           console.log("last timestamp :" + lastTimeStamp + ' - ' +  "new timestamp :" + newTimeStamp)
                    if (lastTimeStamp == 0)
                        {
                         lastTimeStamp = newTimeStamp
                         date_Obj = new Date(newTimeStamp)
             	           console.log("got timestamp :" + newTimeStamp)
                         newText = date_Obj.toString()
              		       document.getElementById("last_updated").innerHTML = 'last updatet at :'+newText
                        }

                    if (newTimeStamp > lastTimeStamp)
                        {
                         lastTimeStamp = newTimeStamp
                         location.reload(); 
                         date_Obj = new Date(newTimeStamp)
             	           console.log("got timestamp :" + newTimeStamp)
                         newText = date_Obj.toGMTString()
              		       document.getElementById("last_updated").innerHTML = 'last updatet at :'+newText
                        }

		       },
		       error: function (result) {
			       console.log("Error getting TimeStamp")
		       }
		     });

    }

    setInterval(CheckUpdate,1000)
    </script>	
	

{% endblock %}



